![image-20241012073601430]($%7Bimages%7D/image-20241012073601430.png) 

hash扩容

扩容条件：

​	

![image-20241012074407248]($%7Bimages%7D/image-20241012074407248.png)

释放

**那么直接调用free删除也很占用资源，采用lazy free另起线程 去释放资源**

缩容

​	缩容条件：

​	![image-20241012075510609]($%7Bimages%7D/image-20241012075510609.png) 

实际元素小于数组大小的1/10就缩容

![image-20241012075350508]($%7Bimages%7D/image-20241012075350508.png)

​	缩容到恰好大于等于当前数组的2的n次幂

![image-20241012074843579]($%7Bimages%7D/image-20241012074843579.png)

![image-20241012074912348]($%7Bimages%7D/image-20241012074912348.png)

渐进式rehash：增删改善的同时、或者空闲时间顺便迁移一个

空闲时间：利用服务器空闲时间，rehash 1ms  （步长100个索引）

![image-20241012075228069]($%7Bimages%7D/image-20241012075228069.png)

 